<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   mkinitramfs(8) manual page
   See COPYING and COPYRIGHT files for corresponding information.
 -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="mandoc.css" type="text/css" media="all"/>
  <title>MKINITRAMFS(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">MKINITRAMFS(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">MKINITRAMFS(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">mkinitramfs</code> &#x2014;
    <span class="Nd">create an initial ramdisk environment</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">mkinitramfs</code></td>
    <td>[<code class="Fl">-fhv</code>] [<code class="Fl">-D</code>
      <var class="Ar">helperfile</var>] [<code class="Fl">-H</code>
      <var class="Ar">hooksdir</var>] [<code class="Fl">-I</code>
      <var class="Ar">initfile</var>] [<code class="Fl">-c</code>
      <var class="Ar">conffile</var>] [<code class="Fl">-k</code>
      <var class="Ar">kernelversion</var>] [<code class="Fl">-m</code>
      <var class="Ar">modulesdir</var>] [<code class="Fl">-o</code>
      <var class="Ar">initramfs</var>]</td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp">The <code class="Nm">mkinitramfs</code> utility creates an initial
    ramdisk environment for booting the Linux kernel. The initial ramdisk is in
    essence a very small environment (early userspace) which loads various
    kernel modules and sets up necessary things before handing over control to
    init. This makes it possible to have, for example, encrypted root file
    systems and root file systems on a software RAID array.
    <code class="Nm">mkinitramfs</code> can be extended with custom hooks.</p>
<p class="Pp">The options are as follows:</p>
<dl class="Bl-tag">
  <dt id="D"><a class="permalink" href="#D"><code class="Fl">-D</code></a>
    <var class="Ar">helperfile</var>,
    <code class="Fl">--helper</code>=<var class="Ar">helperfile</var></dt>
  <dd>Specify an alternate device helper file instead of the default
      <span class="Pa">/usr/share/mkinitramfs/device-helper</span>.</dd>
  <dt id="H"><a class="permalink" href="#H"><code class="Fl">-H</code></a>
    <var class="Ar">hooksdir</var>,
    <code class="Fl">--hooks</code>=<var class="Ar">hooksdir</var></dt>
  <dd>Specify additional directory for hooks. By default,
      <code class="Nm">mkinitramfs</code> uses
      <span class="Pa">/usr/share/mkinitramfs/hooks</span> and
      <span class="Pa">/etc/mkinitramfs/hooks</span>.</dd>
  <dt id="I"><a class="permalink" href="#I"><code class="Fl">-I</code></a>
    <var class="Ar">initfile</var>,
    <code class="Fl">--init</code>=<var class="Ar">initfile</var></dt>
  <dd>Specify an alternate init script instead of the default
      <span class="Pa">/usr/share/mkinitramfs/init</span>.</dd>
  <dt id="c"><a class="permalink" href="#c"><code class="Fl">-c</code></a>
    <var class="Ar">conffile</var>,
    <code class="Fl">--config</code>=<a class="permalink" href="#conffile"><i class="Em" id="conffile">conffile</i></a></dt>
  <dd>Specify an alternate configuration file instead of the default
      <span class="Pa">/etc/mkinitramfs/config</span>.</dd>
  <dt id="f"><a class="permalink" href="#f"><code class="Fl">-f</code></a>,
    <code class="Fl">--force</code></dt>
  <dd>Forcefully overwrite initramfs image.</dd>
  <dt id="k"><a class="permalink" href="#k"><code class="Fl">-k</code></a>
    <var class="Ar">kernelversion</var>,
    <code class="Fl">--kernel</code>=<var class="Ar">kernelversion</var></dt>
  <dd>Specify kernel version instead of using the version of current running
      kernel (&#x201C;uname -r&#x201D;). Useful for bootstrapping future system
      with modular kernel.</dd>
  <dt id="m"><a class="permalink" href="#m"><code class="Fl">-m</code></a>
    <var class="Ar">modulesdir</var>,
    <code class="Fl">--modules</code>=<var class="Ar">modulesdir</var></dt>
  <dd>Specify an alternate directory where where kernel modules stored instead
      of the default <span class="Pa">/lib/modules</span>.
    <p class="Pp" id="monolith">This option has no effect if
        <a class="permalink" href="#monolith"><b class="Sy">monolith</b></a> or
        <a class="permalink" href="#hostonly"><b class="Sy" id="hostonly">hostonly</b></a>
        were enabled in configuration file.</p>
  </dd>
  <dt id="o"><a class="permalink" href="#o"><code class="Fl">-o</code></a>
    <var class="Ar">initramfs</var>,
    <code class="Fl">--output</code>=<var class="Ar">initramfs</var></dt>
  <dd>Specify an alternate output file where initramfs image will be stored
      instead of the default
      <span class="Pa">mkinitramfs-</span>&quot;<code class="Li">kernelversion</code>&quot;
      directory, created in <code class="Ev">TMPDIR</code> or (if unavailable)
      in <span class="Pa">/tmp</span> directory.</dd>
  <dt id="v"><a class="permalink" href="#v"><code class="Fl">-v</code></a>,
    <code class="Fl">--version</code></dt>
  <dd>Print version and exit.</dd>
  <dt id="h"><a class="permalink" href="#h"><code class="Fl">-h</code></a>,
    <code class="Fl">--help</code></dt>
  <dd>Print help and exit.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<p class="Pp"><code class="Nm">mkinitramfs</code> uses the
    <code class="Ev">TMPDIR</code> environment variable. If set, it uses
    subdirectories in the given directory to create its temporary working
    directories. Else it uses <span class="Pa">/tmp</span> as default value for
    that purpose. The given directory should be on a filesystem which allows the
    execution of files stored there, i.e. should not be mounted with the
    <a class="permalink" href="#noexec"><b class="Sy" id="noexec">noexec</b></a>
    mount option.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag Bl-compact">
  <dt><span class="Pa">/etc/mkinitramfs/config</span></dt>
  <dd>The default configuration file. See
      <a class="Xr" href="mkinitramfs.config.5.html">mkinitramfs.config(5)</a>
      for a description of the available configuration parameters.
    <p class="Pp"></p>
  </dd>
  <dt><span class="Pa">/usr/share/mkinitramfs/hooks/</span>,</dt>
  <dd style="width: auto;">&#x00A0;</dd>
  <dt><span class="Pa">/etc/mkinitramfs/hooks/</span></dt>
  <dd>Hooks directories.
    <p class="Pp"></p>
  </dd>
  <dt><span class="Pa">/usr/share/mkinitramfs/init</span></dt>
  <dd>Init.
    <p class="Pp"></p>
  </dd>
  <dt><span class="Pa">/usr/share/mkinitramfs/device-helper</span></dt>
  <dd>Device-helper.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_STATUS"><a class="permalink" href="#EXIT_STATUS">EXIT
  STATUS</a></h1>
<p class="Pp">The <code class="Nm">mkinitramfs</code> utility exits&#x00A0;0 on
    success, and&#x00A0;&gt;0 if an error occurs.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">Create an initramfs for current running kernel:</p>
<div class="Bd Pp Bd-indent Li">
<pre>mkinitramfs -o /tmp/initramfs-`uname -r`.img</pre>
</div>
<p class="Pp">Create an initramfs for specific kernel:</p>
<div class="Bd Pp Bd-indent Li">
<pre>mkinitramfs -o /tmp/initramfs-5.4.224.img -k 5.4.224</pre>
</div>
<p class="Pp">Debug initramfs creation (check out written logfile):</p>
<div class="Bd Pp Bd-indent Li">
<pre>sh -x `which mkinitramfs` -o /tmp/initramfs-`uname -r` 2&gt;/tmp/log</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="NOTES"><a class="permalink" href="#NOTES">NOTES</a></h1>
<p class="Pp">If you have modular kernel and you use <b class="Sy">busybox'
    modprobe</b> to handle modules, you must note that <b class="Sy">busybox'
    modprobe</b> doesn't have ability to install soft dependencies of modules
    (i.e. <span class="Pa">modules.softdep</span>). You must install them
    yourself using hooks. See
    <a class="Xr" href="mkinitramfs.hooks.7.html">mkinitramfs.hooks(7)</a> how
    to do it.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="mkinitramfs.config.5.html">mkinitramfs.config(5)</a>,
    <a class="Xr" href="mkinitramfs.cmdline.7.html">mkinitramfs.cmdline(7)</a>,
    <a class="Xr" href="mkinitramfs.hooks.7.html">mkinitramfs.hooks(7)</a></p>
<p class="Pp"><a class="Lk" href="https://docs.kernel.org/filesystems/ramfs-rootfs-initramfs.html">Kernel
    subsystem documentation: Ramfs, rootfs and initramfs</a>.</p>
<p class="Pp"><a class="Lk" href="https://docs.kernel.org/admin-guide/initrd.html">The
    Linux kernel user's and administrator's guide: Using the initial RAM disk
    (initrd)</a>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Originally written by <span class="An">illiliti</span>
    &lt;<a class="Mt" href="mailto:illiliti@protonmail.com">illiliti@protonmail.com</a>&gt;
    as
    &#x201C;<a class="permalink" href="#tinyramfs"><b class="Sy" id="tinyramfs">tinyramfs</b></a>&#x201D;
    tool:
    <a class="Lk" href="https://github.com/illiliti/tinyramfs">https://github.com/illiliti/tinyramfs</a>.</p>
<p class="Pp">This implementation was re-worked for Zeppe-Lin by
  <br/>
  <span class="An">Alexandr Savca</span>
    &lt;<a class="Mt" href="mailto:alexandr.savca89@gmail.com">alexandr.savca89@gmail.com</a>&gt;.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">January 3, 2025</td>
    <td class="foot-os">Zeppe-Lin</td>
  </tr>
</table>
</body>
</html>
