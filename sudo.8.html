<!DOCTYPE html>
<html>
<!-- This is an automatically generated file.  Do not edit.
   Automatically generated from the sudo.mdoc.in file.  Do not edit.
  
   SPDX-License-Identifier: ISC
  
   Copyright (c) 1994-1996, 1998-2005, 2007-2023
  	Todd C. Miller <Todd.Miller@sudo.ws>
  
   Permission to use, copy, modify, and distribute this software for any
   purpose with or without fee is hereby granted, provided that the above
   copyright notice and this permission notice appear in all copies.
  
   THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES
   WITH REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF
   MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR
   ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES
   WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR PROFITS, WHETHER IN AN
   ACTION OF CONTRACT, NEGLIGENCE OR OTHER TORTIOUS ACTION, ARISING OUT OF
   OR IN CONNECTION WITH THE USE OR PERFORMANCE OF THIS SOFTWARE.
  
   Sponsored in part by the Defense Advanced Research Projects
   Agency (DARPA) and Air Force Research Laboratory, Air Force
   Materiel Command, USAF, under agreement number F39502-99-1-0512.
   -->
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <link rel="stylesheet" href="mandoc.css" type="text/css" media="all"/>
  <title>SUDO(8)</title>
</head>
<body>
<table class="head">
  <tr>
    <td class="head-ltitle">SUDO(8)</td>
    <td class="head-vol">System Manager's Manual</td>
    <td class="head-rtitle">SUDO(8)</td>
  </tr>
</table>
<div class="manual-text">
<section class="Sh">
<h1 class="Sh" id="NAME"><a class="permalink" href="#NAME">NAME</a></h1>
<p class="Pp"><code class="Nm">sudo</code>, <code class="Nm">sudoedit</code>
    &#x2014; <span class="Nd">execute a command as another user</span></p>
</section>
<section class="Sh">
<h1 class="Sh" id="SYNOPSIS"><a class="permalink" href="#SYNOPSIS">SYNOPSIS</a></h1>
<table class="Nm">
  <tr>
    <td><code class="Nm">sudo</code></td>
    <td><code class="Fl">-h</code> | <code class="Fl">-K</code> |
      <code class="Fl">-k</code> | <code class="Fl">-V</code></td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">sudo</code></td>
    <td><code class="Fl">-v</code> [<code class="Fl">-ABkNnS</code>]
      [<code class="Fl">-g</code> <var class="Ar">group</var>]
      [<code class="Fl">-h</code> <var class="Ar">host</var>]
      [<code class="Fl">-p</code> <var class="Ar">prompt</var>]
      [<code class="Fl">-u</code> <var class="Ar">user</var>]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">sudo</code></td>
    <td><code class="Fl">-l</code> [<code class="Fl">-ABkNnS</code>]
      [<code class="Fl">-g</code> <var class="Ar">group</var>]
      [<code class="Fl">-h</code> <var class="Ar">host</var>]
      [<code class="Fl">-p</code> <var class="Ar">prompt</var>]
      [<code class="Fl">-U</code> <var class="Ar">user</var>]
      [<code class="Fl">-u</code> <var class="Ar">user</var>]
      [<var class="Ar">command</var> [<var class="Ar">arg ...</var>]]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">sudo</code></td>
    <td>[<code class="Fl">-ABbEHnPS</code>] [<code class="Fl">-C</code>
      <var class="Ar">num</var>] [<code class="Fl">-D</code>
      <var class="Ar">directory</var>] [<code class="Fl">-g</code>
      <var class="Ar">group</var>] [<code class="Fl">-h</code>
      <var class="Ar">host</var>] [<code class="Fl">-p</code>
      <var class="Ar">prompt</var>] [<code class="Fl">-R</code>
      <var class="Ar">directory</var>] [<code class="Fl">-T</code>
      <var class="Ar">timeout</var>] [<code class="Fl">-u</code>
      <var class="Ar">user</var>]
      [<var class="Ar">VAR</var>=<var class="Ar">value</var>]
      [<code class="Fl">-i</code> | <code class="Fl">-s</code>]
      [<var class="Ar">command</var> [<var class="Ar">arg ...</var>]]</td>
  </tr>
</table>
<br/>
<table class="Nm">
  <tr>
    <td><code class="Nm">sudoedit</code></td>
    <td>[<code class="Fl">-ABkNnS</code>] [<code class="Fl">-C</code>
      <var class="Ar">num</var>] [<code class="Fl">-D</code>
      <var class="Ar">directory</var>] [<code class="Fl">-g</code>
      <var class="Ar">group</var>] [<code class="Fl">-h</code>
      <var class="Ar">host</var>] [<code class="Fl">-p</code>
      <var class="Ar">prompt</var>] [<code class="Fl">-R</code>
      <var class="Ar">directory</var>] [<code class="Fl">-T</code>
      <var class="Ar">timeout</var>] [<code class="Fl">-u</code>
      <var class="Ar">user</var>] <var class="Ar">file ...</var></td>
  </tr>
</table>
</section>
<section class="Sh">
<h1 class="Sh" id="DESCRIPTION"><a class="permalink" href="#DESCRIPTION">DESCRIPTION</a></h1>
<p class="Pp"><code class="Nm">sudo</code> allows a permitted user to execute a
    <var class="Ar">command</var> as the superuser or another user, as specified
    by the security policy. The invoking user's real
    (<a class="permalink" href="#not"><i class="Em" id="not">not</i></a>
    <span class="No">effective</span>) user-ID is used to determine the user
    name with which to query the security policy.</p>
<p class="Pp"><code class="Nm">sudo</code> supports a plugin architecture for
    security policies, auditing, and input/output logging. Third parties can
    develop and distribute their own plugins to work seamlessly with the
    <code class="Nm">sudo</code> front-end. The default security policy is
    <i class="Em">sudoers</i>, which is configured via the file
    <span class="Pa">/etc/sudoers</span>, or via LDAP. See the
    <a class="Sx" href="#Plugins">Plugins</a> section for more information.</p>
<p class="Pp">The security policy determines what privileges, if any, a user has
    to run <code class="Nm">sudo</code>. The policy may require that users
    authenticate themselves with a password or another authentication mechanism.
    If authentication is required, <code class="Nm">sudo</code> will exit if the
    user's password is not entered within a configurable time limit. This limit
    is policy-specific; the default password prompt timeout for the
    <i class="Em">sudoers</i> security policy is 5 minutes.</p>
<p class="Pp" id="timestamp_timeout">Security policies may support credential
    caching to allow the user to run <code class="Nm">sudo</code> again for a
    period of time without requiring authentication. By default, the
    <i class="Em">sudoers</i> policy caches credentials on a per-terminal basis
    for 5 minutes. See the <i class="Em">timestamp_type</i> and
    <a class="permalink" href="#timestamp_timeout"><i class="Em">timestamp_timeout</i></a>
    options in <a class="Xr" href="sudoers.5.html">sudoers(5)</a> for more
    information. By running <code class="Nm">sudo</code> with the
    <code class="Fl">-v</code> option, a user can update the cached credentials
    without running a <var class="Ar">command</var>.</p>
<p class="Pp">On systems where <code class="Nm">sudo</code> is the primary
    method of gaining superuser privileges, it is imperative to avoid syntax
    errors in the security policy configuration files. For the default security
    policy, <a class="Xr" href="sudoers.5.html">sudoers(5)</a>, changes to the
    configuration files should be made using the
    <a class="Xr" href="visudo.8.html">visudo(8)</a> utility which will ensure
    that no syntax errors are introduced.</p>
<p class="Pp">When invoked as <code class="Nm">sudoedit</code>, the
    <code class="Fl">-e</code> option (described below), is implied.</p>
<p class="Pp">Security policies and audit plugins may log successful and failed
    attempts to run <code class="Nm">sudo</code>. If an I/O plugin is
    configured, the running <var class="Ar">command</var>'s input and output may
    be logged as well.</p>
<p class="Pp">The options are as follows:</p>
<dl class="Bl-tag">
  <dt id="A"><a class="permalink" href="#A"><code class="Fl">-A</code></a>,
    <code class="Fl">--askpass</code></dt>
  <dd>Normally, if <code class="Nm">sudo</code> requires a password, it will
      read it from the user's terminal. If the <code class="Fl">-A</code>
      (<a class="permalink" href="#askpass"><i class="Em" id="askpass">askpass</i></a>)
      option is specified, a (possibly graphical) helper program is executed to
      read the user's password and output the password to the standard output.
      If the <code class="Ev">SUDO_ASKPASS</code> environment variable is set,
      it specifies the path to the helper program. Otherwise, if
      <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a> contains a line
      specifying the askpass program, that value will be used. For example:
    <div class="Bd Pp Bd-indent Li">
    <pre># Path to askpass helper program
Path askpass /usr/X11R6/bin/ssh-askpass</pre>
    </div>
    <p class="Pp">If no askpass program is available,
        <code class="Nm">sudo</code> will exit with an error.</p>
  </dd>
  <dt id="B"><a class="permalink" href="#B"><code class="Fl">-B</code></a>,
    <code class="Fl">--bell</code></dt>
  <dd>Ring the bell as part of the password prompt when a terminal is present.
      This option has no effect if an askpass program is used.</dd>
  <dt id="b"><a class="permalink" href="#b"><code class="Fl">-b</code></a>,
    <code class="Fl">--background</code></dt>
  <dd>Run the given <var class="Ar">command</var> in the background. It is not
      possible to use shell job control to manipulate background processes
      started by <code class="Nm">sudo</code>. Most interactive
      <var class="Ar">command</var>s will fail to work properly in background
      mode.</dd>
  <dt id="C"><a class="permalink" href="#C"><code class="Fl">-C</code></a>
    <var class="Ar">num</var>,
    <code class="Fl">--close-from</code>=<var class="Ar">num</var></dt>
  <dd>Close all file descriptors greater than or equal to
      <var class="Ar">num</var> before executing a
      <var class="Ar">command</var>. Values less than three are not permitted.
      By default, <code class="Nm">sudo</code> will close all open file
      descriptors other than standard input, standard output, and standard error
      when executing a <var class="Ar">command</var>. The security policy may
      restrict the user's ability to use this option. The
      <i class="Em">sudoers</i> policy only permits use of the
      <code class="Fl">-C</code> option when the administrator has enabled the
      <a class="permalink" href="#closefrom_override"><i class="Em" id="closefrom_override">closefrom_override</i></a>
      option.</dd>
  <dt id="D"><a class="permalink" href="#D"><code class="Fl">-D</code></a>
    <var class="Ar">directory</var>,
    <code class="Fl">--chdir</code>=<var class="Ar">directory</var></dt>
  <dd>Run the <var class="Ar">command</var> in the specified
      <var class="Ar">directory</var> instead of the current working directory.
      The security policy may return an error if the user does not have
      permission to specify the working directory.</dd>
  <dt id="E"><a class="permalink" href="#E"><code class="Fl">-E</code></a>,
    <code class="Fl">--preserve-env</code></dt>
  <dd>Indicates to the security policy that the user wishes to preserve their
      existing environment variables. The security policy may return an error if
      the user does not have permission to preserve the environment.</dd>
  <dt id="preserve-env=list"><a class="permalink" href="#preserve-env=list"><code class="Fl">--preserve-env=list</code></a></dt>
  <dd>Indicates to the security policy that the user wishes to add the
      comma-separated list of environment variables to those preserved from the
      user's environment. The security policy may return an error if the user
      does not have permission to preserve the environment. This option may be
      specified multiple times.</dd>
  <dt id="e"><a class="permalink" href="#e"><code class="Fl">-e</code></a>,
    <code class="Fl">--edit</code></dt>
  <dd>Edit one or more <var class="Ar">file</var>s instead of running a
      <var class="Ar">command</var>. In lieu of a path name, the string
      &quot;sudoedit&quot; is used when consulting the security policy. If the
      user is authorized by the policy, the following steps are taken:
    <ol class="Bl-enum Bd-indent">
      <li>Temporary copies are made of the files to be edited with the owner set
          to the invoking user.</li>
      <li id="editor">The editor specified by the policy is run to edit the
          temporary files. The <i class="Em">sudoers</i> policy uses the
          <code class="Ev">SUDO_EDITOR</code>, <code class="Ev">VISUAL</code>
          and <code class="Ev">EDITOR</code> environment variables (in that
          order). If none of <code class="Ev">SUDO_EDITOR</code>,
          <code class="Ev">VISUAL</code> or <code class="Ev">EDITOR</code> are
          set, the first program listed in the
          <a class="permalink" href="#editor"><i class="Em">editor</i></a>
          <a class="Xr" href="sudoers.5.html">sudoers(5)</a> option is
        used.</li>
      <li>If they have been modified, the temporary files are copied back to
          their original location and the temporary versions are removed.</li>
    </ol>
    <p class="Pp">To help prevent the editing of unauthorized files, the
        following restrictions are enforced unless explicitly allowed by the
        security policy:</p>
    <ul class="Bl-bullet Bd-indent">
      <li>Symbolic links may not be edited (version 1.8.15 and higher).</li>
      <li>Symbolic links along the path to be edited are not followed when the
          parent directory is writable by the invoking user unless that user is
          root (version 1.8.16 and higher).</li>
      <li>Files located in a directory that is writable by the invoking user may
          not be edited unless that user is root (version 1.8.16 and
        higher).</li>
    </ul>
    <p class="Pp">Users are never allowed to edit device special files.</p>
    <p class="Pp">If the specified file does not exist, it will be created.
        Unlike most <var class="Ar">command</var>s run by
        <i class="Em">sudo</i>, the editor is run with the invoking user's
        environment unmodified. If the temporary file becomes empty after
        editing, the user will be prompted before it is installed. If, for some
        reason, <code class="Nm">sudo</code> is unable to update a file with its
        edited version, the user will receive a warning and the edited copy will
        remain in a temporary file.</p>
  </dd>
  <dt id="g"><a class="permalink" href="#g"><code class="Fl">-g</code></a>
    <var class="Ar">group</var>,
    <code class="Fl">--group</code>=<var class="Ar">group</var></dt>
  <dd>Run the <var class="Ar">command</var> with the primary group set to
      <var class="Ar">group</var> instead of the primary group specified by the
      target user's password database entry. The <var class="Ar">group</var> may
      be either a group name or a numeric group-ID (GID) prefixed with the
      &#x2018;<code class="Li">#</code>&#x2019; character (e.g.,
      &#x2018;<code class="Li">#0</code>&#x2019; for GID 0). When running a
      <var class="Ar">command</var> as a GID, many shells require that the
      &#x2018;<code class="Li">#</code>&#x2019; be escaped with a backslash
      (&#x2018;<code class="Li">\</code>&#x2019;). If no
      <code class="Fl">-u</code> option is specified, the
      <var class="Ar">command</var> will be run as the invoking user. In either
      case, the primary group will be set to <var class="Ar">group</var>. The
      <i class="Em">sudoers</i> policy permits any of the target user's groups
      to be specified via the <code class="Fl">-g</code> option as long as the
      <code class="Fl">-P</code> option is not in use.</dd>
  <dt id="H"><a class="permalink" href="#H"><code class="Fl">-H</code></a>,
    <code class="Fl">--set-home</code></dt>
  <dd>Request that the security policy set the <code class="Ev">HOME</code>
      environment variable to the home directory specified by the target user's
      password database entry. Depending on the policy, this may be the default
      behavior.</dd>
  <dt id="h"><a class="permalink" href="#h"><code class="Fl">-h</code></a>,
    <code class="Fl">--help</code></dt>
  <dd>Display a short help message to the standard output and exit.</dd>
  <dt id="h~2"><a class="permalink" href="#h~2"><code class="Fl">-h</code></a>
    <var class="Ar">host</var>,
    <code class="Fl">--host</code>=<var class="Ar">host</var></dt>
  <dd>Run the <var class="Ar">command</var> on the specified
      <var class="Ar">host</var> if the security policy plugin supports remote
      <var class="Ar">command</var>s. The <i class="Em">sudoers</i> plugin does
      not currently support running remote <var class="Ar">command</var>s. This
      may also be used in conjunction with the <code class="Fl">-l</code> option
      to list a user's privileges for the remote host.</dd>
  <dt id="i"><a class="permalink" href="#i"><code class="Fl">-i</code></a>,
    <code class="Fl">--login</code></dt>
  <dd>Run the shell specified by the target user's password database entry as a
      login shell. This means that login-specific resource files such as
      <span class="Pa">.profile</span>, <span class="Pa">.bash_profile</span>,
      or <span class="Pa">.login</span> will be read by the shell. If a
      <var class="Ar">command</var> is specified, it is passed to the shell as a
      simple <var class="Ar">command</var> using the <code class="Fl">-c</code>
      option. The <var class="Ar">command</var> and any
      <var class="Ar">arg</var>s are concatenated, separated by spaces, after
      escaping each character (including white space) with a backslash
      (&#x2018;<code class="Li">\</code>&#x2019;) except for alphanumerics,
      underscores, hyphens, and dollar signs. If no
      <var class="Ar">command</var> is specified, an interactive shell is
      executed. <code class="Nm">sudo</code> attempts to change to that user's
      home directory before running the shell. The <var class="Ar">command</var>
      is run with an environment similar to the one a user would receive at log
      in. Most shells behave differently when a <var class="Ar">command</var> is
      specified as compared to an interactive session; consult the shell's
      manual for details. The
      <a class="permalink" href="#Command"><i class="Em" id="Command">Command
      environment</i></a> section in the
      <a class="Xr" href="sudoers.5.html">sudoers(5)</a> manual documents how
      the <code class="Fl">-i</code> option affects the environment in which a
      <var class="Ar">command</var> is run when the <i class="Em">sudoers</i>
      policy is in use.</dd>
  <dt id="K"><a class="permalink" href="#K"><code class="Fl">-K</code></a>,
    <code class="Fl">--remove-timestamp</code></dt>
  <dd>Similar to the <code class="Fl">-k</code> option, except that it removes
      every cached credential for the user, regardless of the terminal or parent
      process ID. The next time <code class="Nm">sudo</code> is run, a password
      must be entered if the security policy requires authentication. It is not
      possible to use the <code class="Fl">-K</code> option in conjunction with
      a <var class="Ar">command</var> or other option. This option does not
      require a password. Not all security policies support credential
    caching.</dd>
  <dt id="k"><a class="permalink" href="#k"><code class="Fl">-k</code></a>,
    <code class="Fl">--reset-timestamp</code></dt>
  <dd>When used without a <var class="Ar">command</var>, invalidates the user's
      cached credentials for the current session. The next time
      <code class="Nm">sudo</code> is run in the session, a password must be
      entered if the security policy requires authentication. By default, the
      <code class="Nm">sudoers</code> policy uses a separate record in the
      credential cache for each terminal (or parent process ID if no terminal is
      present). This prevents the <code class="Fl">-k</code> option from
      interfering with <code class="Nm">sudo</code> commands run in a different
      terminal session. See the <i class="Em">timestamp_type</i> option in
      <a class="Xr" href="sudoers.5.html">sudoers(5)</a> for more information.
      This option does not require a password, and was added to allow a user to
      revoke <code class="Nm">sudo</code> permissions from a
      <span class="Pa">.logout</span> file.
    <p class="Pp">When used in conjunction with a <var class="Ar">command</var>
        or an option that may require a password, this option will cause
        <code class="Nm">sudo</code> to ignore the user's cached credentials. As
        a result, <code class="Nm">sudo</code> will prompt for a password (if
        one is required by the security policy) and will not update the user's
        cached credentials.</p>
    <p class="Pp">Not all security policies support credential caching.</p>
  </dd>
  <dt id="l"><a class="permalink" href="#l"><code class="Fl">-l</code></a>,
    <code class="Fl">--list</code></dt>
  <dd>If no <var class="Ar">command</var> is specified, list the privileges for
      the invoking user (or the <var class="Ar">user</var> specified by the
      <code class="Fl">-U</code> option) on the current host. A longer list
      format is used if this option is specified multiple times and the security
      policy supports a verbose output format.
    <p class="Pp">If a <var class="Ar">command</var> is specified and is
        permitted by the security policy for the invoking user (or the,
        <var class="Ar">user</var> specified by the <code class="Fl">-U</code>
        option) on the current host, the fully-qualified path to the
        <var class="Ar">command</var> is displayed along with any
        <var class="Ar">arg</var>s. If <code class="Fl">-l</code> is specified
        more than once (and the security policy supports it), the matching rule
        is displayed in a verbose format along with the
        <var class="Ar">command</var>. If a <var class="Ar">command</var> is
        specified but not allowed by the policy, <code class="Nm">sudo</code>
        will exit with a status value of 1.</p>
  </dd>
  <dt id="N"><a class="permalink" href="#N"><code class="Fl">-N</code></a>,
    <code class="Fl">--no-update</code></dt>
  <dd>Do not update the user's cached credentials, even if the user successfully
      authenticates. Unlike the <code class="Fl">-k</code> flag, existing cached
      credentials are used if they are valid. To detect when the user's cached
      credentials are valid (or when no authentication is required), the
      following can be used:
    <div class="Bd Pp Bd-indent Li">
    <pre>sudo -Nnv</pre>
    </div>
    <p class="Pp">Not all security policies support credential caching.</p>
  </dd>
  <dt id="n"><a class="permalink" href="#n"><code class="Fl">-n</code></a>,
    <code class="Fl">--non-interactive</code></dt>
  <dd>Avoid prompting the user for input of any kind. If a password is required
      for the <var class="Ar">command</var> to run, <code class="Nm">sudo</code>
      will display an error message and exit.</dd>
  <dt id="P"><a class="permalink" href="#P"><code class="Fl">-P</code></a>,
    <code class="Fl">--preserve-groups</code></dt>
  <dd>Preserve the invoking user's group vector unaltered. By default, the
      <i class="Em">sudoers</i> policy will initialize the group vector to the
      list of groups the target user is a member of. The real and effective
      group-IDs, however, are still set to match the target user.</dd>
  <dt id="p"><a class="permalink" href="#p"><code class="Fl">-p</code></a>
    <var class="Ar">prompt</var>,
    <code class="Fl">--prompt</code>=<var class="Ar">prompt</var></dt>
  <dd>Use a custom password prompt with optional escape sequences. The following
      percent (&#x2018;<code class="Li">%</code>&#x2019;) escape sequences are
      supported by the <i class="Em">sudoers</i> policy:
    <dl class="Bl-tag">
      <dt id="fqdn">%H</dt>
      <dd>expanded to the host name including the domain name (only if the
          machine's host name is fully qualified or the
          <a class="permalink" href="#fqdn"><i class="Em">fqdn</i></a> option is
          set in <a class="Xr" href="sudoers.5.html">sudoers(5)</a>)</dd>
      <dt>%h</dt>
      <dd>expanded to the local host name without the domain name</dd>
      <dt id="rootpw">%p</dt>
      <dd>expanded to the name of the user whose password is being requested
          (respects the
          <a class="permalink" href="#rootpw"><i class="Em">rootpw</i></a>,
          <i class="Em">targetpw</i>, and
          <a class="permalink" href="#runaspw"><i class="Em" id="runaspw">runaspw</i></a>
          flags in <a class="Xr" href="sudoers.5.html">sudoers(5)</a>)</dd>
      <dt>%U</dt>
      <dd>expanded to the login name of the user the
          <var class="Ar">command</var> will be run as (defaults to root unless
          the <code class="Fl">-u</code> option is also specified)</dd>
      <dt>%u</dt>
      <dd>expanded to the invoking user's login name</dd>
      <dt>%%</dt>
      <dd>two consecutive &#x2018;<code class="Li">%</code>&#x2019; characters
          are collapsed into a single &#x2018;<code class="Li">%</code>&#x2019;
          character</dd>
    </dl>
    <p class="Pp" id="passprompt_override">The custom prompt will override the
        default prompt specified by either the security policy or the
        <code class="Ev">SUDO_PROMPT</code> environment variable. On systems
        that use PAM, the custom prompt will also override the prompt specified
        by a PAM module unless the
        <a class="permalink" href="#passprompt_override"><i class="Em">passprompt_override</i></a>
        flag is disabled in <i class="Em">sudoers</i>.</p>
  </dd>
  <dt id="R"><a class="permalink" href="#R"><code class="Fl">-R</code></a>
    <var class="Ar">directory</var>,
    <code class="Fl">--chroot</code>=<var class="Ar">directory</var></dt>
  <dd>Change to the specified root <var class="Ar">directory</var> (see
      <a class="Xr" href="chroot.8.html">chroot(8)</a>) before running the
      <var class="Ar">command</var>. The security policy may return an error if
      the user does not have permission to specify the root directory.</dd>
  <dt id="S"><a class="permalink" href="#S"><code class="Fl">-S</code></a>,
    <code class="Fl">--stdin</code></dt>
  <dd>Write the prompt to the standard error and read the password from the
      standard input instead of using the terminal device.</dd>
  <dt id="s"><a class="permalink" href="#s"><code class="Fl">-s</code></a>,
    <code class="Fl">--shell</code></dt>
  <dd>Run the shell specified by the <code class="Ev">SHELL</code> environment
      variable if it is set or the shell specified by the invoking user's
      password database entry. If a <var class="Ar">command</var> is specified,
      it is passed to the shell as a simple command using the
      <code class="Fl">-c</code> option. The <var class="Ar">command</var> and
      any <var class="Ar">arg</var>s are concatenated, separated by spaces,
      after escaping each character (including white space) with a backslash
      (&#x2018;<code class="Li">\</code>&#x2019;) except for alphanumerics,
      underscores, hyphens, and dollar signs. If no
      <var class="Ar">command</var> is specified, an interactive shell is
      executed. Most shells behave differently when a
      <var class="Ar">command</var> is specified as compared to an interactive
      session; consult the shell's manual for details.</dd>
  <dt id="U"><a class="permalink" href="#U"><code class="Fl">-U</code></a>
    <var class="Ar">user</var>,
    <code class="Fl">--other-user</code>=<var class="Ar">user</var></dt>
  <dd>Used in conjunction with the <code class="Fl">-l</code> option to list the
      privileges for <var class="Ar">user</var> instead of for the invoking
      user. The security policy may restrict listing other users' privileges.
      When using the <i class="Em">sudoers</i> policy, the
      <code class="Fl">-U</code> option is restricted to the root user and users
      with either the &#x201C;list&#x201D; priviege for the specified
      <var class="Ar">user</var> or the ability to run any
      <var class="Ar">command</var> as root or <var class="Ar">user</var> on the
      current host.</dd>
  <dt id="T"><a class="permalink" href="#T"><code class="Fl">-T</code></a>
    <var class="Ar">timeout</var>,
    <code class="Fl">--command-timeout</code>=<var class="Ar">timeout</var></dt>
  <dd>Used to set a timeout for the <var class="Ar">command</var>. If the
      timeout expires before the <var class="Ar">command</var> has exited, the
      <var class="Ar">command</var> will be terminated. The security policy may
      restrict the user's ability to set timeouts. The <i class="Em">sudoers</i>
      policy requires that user-specified timeouts be explicitly enabled.</dd>
  <dt id="u"><a class="permalink" href="#u"><code class="Fl">-u</code></a>
    <var class="Ar">user</var>,
    <code class="Fl">--user</code>=<var class="Ar">user</var></dt>
  <dd>Run the <var class="Ar">command</var> as a user other than the default
      target user (usually
      <a class="permalink" href="#root"><b class="Sy" id="root">root</b></a>).
      The <var class="Ar">user</var> may be either a user name or a numeric
      user-ID (UID) prefixed with the &#x2018;<code class="Li">#</code>&#x2019;
      character (e.g., &#x2018;<code class="Li">#0</code>&#x2019; for UID 0).
      When running <var class="Ar">command</var>s as a UID, many shells require
      that the &#x2018;<code class="Li">#</code>&#x2019; be escaped with a
      backslash (&#x2018;<code class="Li">\</code>&#x2019;). Some security
      policies may restrict UIDs to those listed in the password database. The
      <i class="Em">sudoers</i> policy allows UIDs that are not in the password
      database as long as the <i class="Em">targetpw</i> option is not set.
      Other security policies may not support this.</dd>
  <dt id="V"><a class="permalink" href="#V"><code class="Fl">-V</code></a>,
    <code class="Fl">--version</code></dt>
  <dd>Print the <code class="Nm">sudo</code> version string as well as the
      version string of any configured plugins. If the invoking user is already
      root, the <code class="Fl">-V</code> option will display the options
      passed to configure when <code class="Nm">sudo</code> was built; plugins
      may display additional information such as default options.</dd>
  <dt id="v"><a class="permalink" href="#v"><code class="Fl">-v</code></a>,
    <code class="Fl">--validate</code></dt>
  <dd>Update the user's cached credentials, authenticating the user if
      necessary. For the <i class="Em">sudoers</i> plugin, this extends the
      <code class="Nm">sudo</code> timeout for another 5 minutes by default, but
      does not run a <var class="Ar">command</var>. Not all security policies
      support cached credentials.</dd>
  <dt><code class="Fl">--</code></dt>
  <dd>The <code class="Fl">--</code> is used to delimit the end of the
      <code class="Nm">sudo</code> options. Subsequent options are passed to the
      <var class="Ar">command</var>.</dd>
</dl>
<p class="Pp">Options that take a value may only be specified once unless
    otherwise indicated in the description. This is to help guard against
    problems caused by poorly written scripts that invoke
    <code class="Nm">sudo</code> with user-controlled input.</p>
<p class="Pp" id="setenv">Environment variables to be set for the
    <var class="Ar">command</var> may also be passed as options to
    <code class="Nm">sudo</code> in the form
    <var class="Ar">VAR</var>=<var class="Ar">value</var>, for example
    <code class="Ev">LD_LIBRARY_PATH</code>=<span class="Pa">/usr/local/pkg/lib</span>.
    Environment variables may be subject to restrictions imposed by the security
    policy plugin. The <i class="Em">sudoers</i> policy subjects environment
    variables passed as options to the same restrictions as existing environment
    variables with one important difference. If the
    <a class="permalink" href="#setenv"><i class="Em">setenv</i></a> option is
    set in <i class="Em">sudoers</i>, the <var class="Ar">command</var> to be
    run has the <code class="Dv">SETENV</code> tag set or the
    <var class="Ar">command</var> matched is
    <a class="permalink" href="#ALL"><b class="Sy" id="ALL">ALL</b></a>, the
    user may set variables that would otherwise be forbidden. See
    <a class="Xr" href="sudoers.5.html">sudoers(5)</a> for more information.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="COMMAND_EXECUTION"><a class="permalink" href="#COMMAND_EXECUTION">COMMAND
  EXECUTION</a></h1>
<p class="Pp">When <code class="Nm">sudo</code> executes a
    <var class="Ar">command</var>, the security policy specifies the execution
    environment for the <var class="Ar">command</var>. Typically, the real and
    effective user and group and IDs are set to match those of the target user,
    as specified in the password database, and the group vector is initialized
    based on the group database (unless the <code class="Fl">-P</code> option
    was specified).</p>
<p class="Pp">The following parameters may be specified by security policy:</p>
<ul class="Bl-bullet">
  <li>real and effective user-ID</li>
  <li>real and effective group-ID</li>
  <li>supplementary group-IDs</li>
  <li>the environment list</li>
  <li>current working directory</li>
  <li>file creation mode mask (umask)</li>
  <li>scheduling priority (aka nice value)</li>
</ul>
<section class="Ss">
<h2 class="Ss" id="Process_model"><a class="permalink" href="#Process_model">Process
  model</a></h2>
<p class="Pp">There are two distinct ways <code class="Nm">sudo</code> can run a
    <var class="Ar">command</var>.</p>
<p class="Pp">If an I/O logging plugin is configured to log terminal I/O, or if
    the security policy explicitly requests it, a new pseudo-terminal
    (&#x201C;pty&#x201D;) is allocated and
    <a class="Xr" href="fork.2.html">fork(2)</a> is used to create a second
    <code class="Nm">sudo</code> process, referred to as the
    <i class="Em">monitor</i>. The <i class="Em">monitor</i> creates a new
    terminal session with itself as the leader and the pty as its controlling
    terminal, calls <a class="Xr" href="fork.2.html">fork(2)</a> again, sets up
    the execution environment as described above, and then uses the
    <a class="Xr" href="execve.2.html">execve(2)</a> system call to run the
    <var class="Ar">command</var> in the child process. The
    <i class="Em">monitor</i> exists to relay job control signals between the
    user's terminal and the pty the <var class="Ar">command</var> is being run
    in. This makes it possible to suspend and resume the
    <var class="Ar">command</var> normally. Without the
    <i class="Em">monitor</i>, the <var class="Ar">command</var> would be in
    what POSIX terms an &#x201C;orphaned process group&#x201D; and it would not
    receive any job control signals from the kernel. When the
    <var class="Ar">command</var> exits or is terminated by a signal, the
    <i class="Em">monitor</i> passes the <var class="Ar">command</var>'s exit
    status to the main <code class="Nm">sudo</code> process and exits. After
    receiving the <var class="Ar">command</var>'s exit status, the main
    <code class="Nm">sudo</code> process passes the
    <var class="Ar">command</var>'s exit status to the security policy's close
    function, as well as the close function of any configured audit plugin, and
    exits. This mode is the default for sudo versions 1.9.14 and above when
    using the sudoers policy.</p>
<p class="Pp">If no pty is used, <code class="Nm">sudo</code> calls
    <a class="Xr" href="fork.2.html">fork(2)</a>, sets up the execution
    environment as described above, and uses the
    <a class="Xr" href="execve.2.html">execve(2)</a> system call to run the
    <var class="Ar">command</var> in the child process. The main
    <code class="Nm">sudo</code> process waits until the
    <var class="Ar">command</var> has completed, then passes the
    <var class="Ar">command</var>'s exit status to the security policy's close
    function, as well as the close function of any configured audit plugins, and
    exits. As a special case, if the policy plugin does not define a close
    function, <code class="Nm">sudo</code> will execute the
    <var class="Ar">command</var> directly instead of calling
    <a class="Xr" href="fork.2.html">fork(2)</a> first. The
    <i class="Em">sudoers</i> policy plugin will only define a close function
    when I/O logging is enabled, a pty is required, an SELinux role is
    specified, the <var class="Ar">command</var> has an associated timeout, or
    the <i class="Em">pam_session</i> or <i class="Em">pam_setcred</i> options
    are enabled. Both <i class="Em">pam_session</i> and
    <i class="Em">pam_setcred</i> are enabled by default on systems using PAM.
    This mode is the default for sudo versions prior to 1.9.14 when using the
    sudoers policy.</p>
<p class="Pp">On systems that use PAM, the security policy's close function is
    responsible for closing the PAM session. It may also log the
    <var class="Ar">command</var>'s exit status.</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Signal_handling"><a class="permalink" href="#Signal_handling">Signal
  handling</a></h2>
<p class="Pp">When the <var class="Ar">command</var> is run as a child of the
    <code class="Nm">sudo</code> process, <code class="Nm">sudo</code> will
    relay signals it receives to the <var class="Ar">command</var>. The
    <code class="Dv">SIGINT</code> and <code class="Dv">SIGQUIT</code> signals
    are only relayed when the <var class="Ar">command</var> is being run in a
    new pty or when the signal was sent by a user process, not the kernel. This
    prevents the <var class="Ar">command</var> from receiving
    <code class="Dv">SIGINT</code> twice each time the user enters control-C.
    Some signals, such as <code class="Dv">SIGSTOP</code> and
    <code class="Dv">SIGKILL</code>, cannot be caught and thus will not be
    relayed to the <var class="Ar">command</var>. As a general rule,
    <code class="Dv">SIGTSTP</code> should be used instead of
    <code class="Dv">SIGSTOP</code> when you wish to suspend a
    <var class="Ar">command</var> being run by <code class="Nm">sudo</code>.</p>
<p class="Pp" id="exec">As a special case, <code class="Nm">sudo</code> will not
    relay signals that were sent by the <var class="Ar">command</var> it is
    running. This prevents the <var class="Ar">command</var> from accidentally
    killing itself. On some systems, the
    <a class="Xr" href="reboot.8.html">reboot(8)</a> utility sends
    <code class="Dv">SIGTERM</code> to all non-system processes other than
    itself before rebooting the system. This prevents
    <code class="Nm">sudo</code> from relaying the
    <code class="Dv">SIGTERM</code> signal it received back to
    <a class="Xr" href="reboot.8.html">reboot(8)</a>, which might then exit
    before the system was actually rebooted, leaving it in a half-dead state
    similar to single user mode. Note, however, that this check only applies to
    the <var class="Ar">command</var> run by <code class="Nm">sudo</code> and
    not any other processes that the <var class="Ar">command</var> may create.
    As a result, running a script that calls
    <a class="Xr" href="reboot.8.html">reboot(8)</a> or
    <a class="Xr" href="shutdown.8.html">shutdown(8)</a> via
    <code class="Nm">sudo</code> may cause the system to end up in this
    undefined state unless the <a class="Xr" href="reboot.8.html">reboot(8)</a>
    or <a class="Xr" href="shutdown.8.html">shutdown(8)</a> are run using the
    <a class="permalink" href="#exec"><code class="Fn">exec</code></a>() family
    of functions instead of
    <a class="permalink" href="#system"><code class="Fn" id="system">system</code></a>()
    (which interposes a shell between the <var class="Ar">command</var> and the
    calling process).</p>
</section>
<section class="Ss">
<h2 class="Ss" id="Plugins"><a class="permalink" href="#Plugins">Plugins</a></h2>
<p class="Pp">Plugins may be specified via <i class="Em">Plugin</i> directives
    in the <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a> file. They may
    be loaded as dynamic shared objects (on systems that support them), or
    compiled directly into the <code class="Nm">sudo</code> binary. If no
    <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a> file is present, or
    if it doesn't contain any <i class="Em">Plugin</i> lines,
    <code class="Nm">sudo</code> will use
    <a class="Xr" href="sudoers.5.html">sudoers(5)</a> for the policy, auditing,
    and I/O logging plugins. See the
    <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a> manual for details of
    the <span class="Pa">/etc/sudo.conf</span> file and the
    <a class="Xr" href="sudo_plugin.5.html">sudo_plugin(5)</a> manual for more
    information about the <code class="Nm">sudo</code> plugin architecture.</p>
</section>
</section>
<section class="Sh">
<h1 class="Sh" id="EXIT_VALUE"><a class="permalink" href="#EXIT_VALUE">EXIT
  VALUE</a></h1>
<p class="Pp">Upon successful execution of a <var class="Ar">command</var>, the
    exit status from <code class="Nm">sudo</code> will be the exit status of the
    program that was executed. If the <var class="Ar">command</var> terminated
    due to receipt of a signal, <code class="Nm">sudo</code> will send itself
    the same signal that terminated the <var class="Ar">command</var>.</p>
<p class="Pp">If the <code class="Fl">-l</code> option was specified without a
    <var class="Ar">command</var>, <code class="Nm">sudo</code> will exit with a
    value of 0 if the user is allowed to run <code class="Nm">sudo</code> and
    they authenticated successfully (as required by the security policy). If a
    <var class="Ar">command</var> is specified with the
    <code class="Fl">-l</code> option, the exit value will only be 0 if the
    <var class="Ar">command</var> is permitted by the security policy, otherwise
    it will be 1.</p>
<p class="Pp">If there is an authentication failure, a configuration/permission
    problem, or if the given <var class="Ar">command</var> cannot be executed,
    <code class="Nm">sudo</code> exits with a value of 1. In the latter case,
    the error string is printed to the standard error. If
    <code class="Nm">sudo</code> cannot
    <a class="Xr" href="stat.2.html">stat(2)</a> one or more entries in the
    user's <code class="Ev">PATH</code>, an error is printed to the standard
    error. (If the directory does not exist or if it is not really a directory,
    the entry is ignored and no error is printed.) This should not happen under
    normal circumstances. The most common reason for
    <a class="Xr" href="stat.2.html">stat(2)</a> to return &#x201C;permission
    denied&#x201D; is if you are running an automounter and one of the
    directories in your <code class="Ev">PATH</code> is on a machine that is
    currently unreachable.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SECURITY_NOTES"><a class="permalink" href="#SECURITY_NOTES">SECURITY
  NOTES</a></h1>
<p class="Pp"><code class="Nm">sudo</code> tries to be safe when executing
    external <var class="Ar">command</var>s.</p>
<p class="Pp">To prevent command spoofing, <code class="Nm">sudo</code> checks
    &quot;.&quot; and &quot;&quot; (both denoting current directory) last when
    searching for a <var class="Ar">command</var> in the user's
    <code class="Ev">PATH</code> (if one or both are in the
    <code class="Ev">PATH</code>). Depending on the security policy, the user's
    <code class="Ev">PATH</code> environment variable may be modified, replaced,
    or passed unchanged to the program that <code class="Nm">sudo</code>
    executes.</p>
<p class="Pp" id="never">Users should
    <a class="permalink" href="#never"><i class="Em">never</i></a> be granted
    <code class="Nm">sudo</code> privileges to execute files that are writable
    by the user or that reside in a directory that is writable by the user. If
    the user can modify or replace the <var class="Ar">command</var> there is no
    way to limit what additional <var class="Ar">command</var>s they can
  run.</p>
<p class="Pp" id="Preventing">By default, <code class="Nm">sudo</code> will only
    log the <var class="Ar">command</var> it explicitly runs. If a user runs a
    <var class="Ar">command</var> such as &#x2018;<code class="Li">sudo
    su</code>&#x2019; or &#x2018;<code class="Li">sudo sh</code>&#x2019;,
    subsequent <var class="Ar">command</var>s run from that shell are not
    subject to <code class="Nm">sudo</code>'s security policy. The same is true
    for <var class="Ar">command</var>s that offer shell escapes (including most
    editors). If I/O logging is enabled, subsequent
    <var class="Ar">command</var>s will have their input and/or output logged,
    but there will not be traditional logs for those
    <var class="Ar">command</var>s. Because of this, care must be taken when
    giving users access to <var class="Ar">command</var>s via
    <code class="Nm">sudo</code> to verify that the
    <var class="Ar">command</var> does not inadvertently give the user an
    effective root shell. For information on ways to address this, see the
    <a class="permalink" href="#Preventing"><i class="Em">Preventing shell
    escapes</i></a> section in
    <a class="Xr" href="sudoers.5.html">sudoers(5)</a>.</p>
<p class="Pp">To prevent the disclosure of potentially sensitive information,
    <code class="Nm">sudo</code> disables core dumps by default while it is
    executing (they are re-enabled for the <var class="Ar">command</var> that is
    run). This historical practice dates from a time when most operating systems
    allowed set-user-ID processes to dump core by default. To aid in debugging
    <code class="Nm">sudo</code> crashes, you may wish to re-enable core dumps
    by setting &#x201C;disable_coredump&#x201D; to false in the
    <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a> file as follows:</p>
<div class="Bd Pp Bd-indent Li">
<pre>Set disable_coredump false</pre>
</div>
<p class="Pp">See the <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a>
    manual for more information.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="ENVIRONMENT"><a class="permalink" href="#ENVIRONMENT">ENVIRONMENT</a></h1>
<p class="Pp"><code class="Nm">sudo</code> utilizes the following environment
    variables. The security policy has control over the actual content of the
    <var class="Ar">command</var>'s environment.</p>
<dl class="Bl-tag">
  <dt id="EDITOR"><a class="permalink" href="#EDITOR"><code class="Ev">EDITOR</code></a></dt>
  <dd>Default editor to use in <code class="Fl">-e</code> (sudoedit) mode if
      neither <code class="Ev">SUDO_EDITOR</code> nor
      <code class="Ev">VISUAL</code> is set.</dd>
  <dt id="MAIL"><a class="permalink" href="#MAIL"><code class="Ev">MAIL</code></a></dt>
  <dd>Set to the mail spool of the target user when the
      <code class="Fl">-i</code> option is specified, or when
      <i class="Em">env_reset</i> is enabled in <i class="Em">sudoers</i>
      (unless <code class="Ev">MAIL</code> is present in the
      <i class="Em">env_keep</i> list).</dd>
  <dt id="HOME"><a class="permalink" href="#HOME"><code class="Ev">HOME</code></a></dt>
  <dd>Set to the home directory of the target user when the
      <code class="Fl">-i</code> or <code class="Fl">-H</code> options are
      specified, when the <code class="Fl">-s</code> option is specified and
      <a class="permalink" href="#set_home"><i class="Em" id="set_home">set_home</i></a>
      is set in <i class="Em">sudoers</i>, when
      <a class="permalink" href="#always_set_home"><i class="Em" id="always_set_home">always_set_home</i></a>
      is enabled in <i class="Em">sudoers</i>, or when
      <i class="Em">env_reset</i> is enabled in <i class="Em">sudoers</i> and
      <code class="Ev">HOME</code> is not present in the
      <i class="Em">env_keep</i> list.</dd>
  <dt id="LOGNAME"><a class="permalink" href="#LOGNAME"><code class="Ev">LOGNAME</code></a></dt>
  <dd>Set to the login name of the target user when the
      <code class="Fl">-i</code> option is specified, when the
      <a class="permalink" href="#set_logname"><i class="Em" id="set_logname">set_logname</i></a>
      option is enabled in <i class="Em">sudoers</i>, or when the
      <i class="Em">env_reset</i> option is enabled in <i class="Em">sudoers</i>
      (unless <code class="Ev">LOGNAME</code> is present in the
      <i class="Em">env_keep</i> list).</dd>
  <dt id="PATH"><a class="permalink" href="#PATH"><code class="Ev">PATH</code></a></dt>
  <dd>May be overridden by the security policy.</dd>
  <dt id="SHELL"><a class="permalink" href="#SHELL"><code class="Ev">SHELL</code></a></dt>
  <dd>Used to determine shell to run with <code class="Fl">-s</code>
    option.</dd>
  <dt id="SUDO_ASKPASS"><a class="permalink" href="#SUDO_ASKPASS"><code class="Ev">SUDO_ASKPASS</code></a></dt>
  <dd>Specifies the path to a helper program used to read the password if no
      terminal is available or if the <code class="Fl">-A</code> option is
      specified.</dd>
  <dt id="SUDO_COMMAND"><a class="permalink" href="#SUDO_COMMAND"><code class="Ev">SUDO_COMMAND</code></a></dt>
  <dd>Set to the <var class="Ar">command</var> run by sudo, including any
      <var class="Ar">arg</var>s. The <var class="Ar">arg</var>s are truncated
      at 4096 characters to prevent a potential execution error.</dd>
  <dt id="SUDO_EDITOR"><a class="permalink" href="#SUDO_EDITOR"><code class="Ev">SUDO_EDITOR</code></a></dt>
  <dd>Default editor to use in <code class="Fl">-e</code> (sudoedit) mode.</dd>
  <dt id="SUDO_GID"><a class="permalink" href="#SUDO_GID"><code class="Ev">SUDO_GID</code></a></dt>
  <dd>Set to the group-ID of the user who invoked sudo.</dd>
  <dt id="SUDO_HOME"><a class="permalink" href="#SUDO_HOME"><code class="Ev">SUDO_HOME</code></a></dt>
  <dd>Set to the home directory of the user who invoked sudo.</dd>
  <dt id="SUDO_PROMPT"><a class="permalink" href="#SUDO_PROMPT"><code class="Ev">SUDO_PROMPT</code></a></dt>
  <dd>Used as the default password prompt unless the <code class="Fl">-p</code>
      option was specified.</dd>
  <dt id="SUDO_PS1"><a class="permalink" href="#SUDO_PS1"><code class="Ev">SUDO_PS1</code></a></dt>
  <dd>If set, <code class="Ev">PS1</code> will be set to its value for the
      program being run.</dd>
  <dt id="SUDO_UID"><a class="permalink" href="#SUDO_UID"><code class="Ev">SUDO_UID</code></a></dt>
  <dd>Set to the user-ID of the user who invoked sudo.</dd>
  <dt id="SUDO_USER"><a class="permalink" href="#SUDO_USER"><code class="Ev">SUDO_USER</code></a></dt>
  <dd>Set to the login name of the user who invoked sudo.</dd>
  <dt id="USER"><a class="permalink" href="#USER"><code class="Ev">USER</code></a></dt>
  <dd>Set to the same value as <code class="Ev">LOGNAME</code>, described
    above.</dd>
  <dt id="VISUAL"><a class="permalink" href="#VISUAL"><code class="Ev">VISUAL</code></a></dt>
  <dd>Default editor to use in <code class="Fl">-e</code> (sudoedit) mode if
      <code class="Ev">SUDO_EDITOR</code> is not set.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="FILES"><a class="permalink" href="#FILES">FILES</a></h1>
<dl class="Bl-tag">
  <dt><span class="Pa">/etc/sudo.conf</span></dt>
  <dd><code class="Nm">sudo</code> front-end configuration</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="EXAMPLES"><a class="permalink" href="#EXAMPLES">EXAMPLES</a></h1>
<p class="Pp">The following examples assume a properly configured security
    policy.</p>
<p class="Pp">To get a file listing of an unreadable directory:</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudo ls /usr/local/protected</pre>
</div>
<p class="Pp">To list the home directory of user yaz on a machine where the file
    system holding ~yaz is not exported as root:</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudo -u yaz ls ~yaz</pre>
</div>
<p class="Pp">To edit the <span class="Pa">index.html</span> file as user
  www:</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudoedit -u www ~www/htdocs/index.html</pre>
</div>
<p class="Pp">To view system logs only accessible to root and users in the adm
    group:</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudo -g adm more /var/log/syslog</pre>
</div>
<p class="Pp">To run an editor as jim with a different primary group:</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudoedit -u jim -g audio ~jim/sound.txt</pre>
</div>
<p class="Pp">To shut down a machine:</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudo shutdown -r +15 &quot;quick reboot&quot;</pre>
</div>
<p class="Pp">To make a usage listing of the directories in the /home partition.
    The <var class="Ar">commands</var> are run in a sub-shell to allow the
    &#x2018;<code class="Li">cd</code>&#x2019; command and file redirection to
    work.</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudo sh -c &quot;cd /home ; du -s * | sort -rn &gt; USAGE&quot;</pre>
</div>
</section>
<section class="Sh">
<h1 class="Sh" id="DIAGNOSTICS"><a class="permalink" href="#DIAGNOSTICS">DIAGNOSTICS</a></h1>
<p class="Pp">Error messages produced by <code class="Nm">sudo</code>
  include:</p>
<dl class="Bl-tag">
  <dt id="editing"><a class="permalink" href="#editing"><code class="Li">editing
    files in a writable directory is not permitted</code></a></dt>
  <dd>By default, <code class="Nm">sudoedit</code> does not permit editing a
      file when any of the parent directories are writable by the invoking user.
      This avoids a race condition that could allow the user to overwrite an
      arbitrary file. See the
      <a class="permalink" href="#sudoedit_checkdir"><i class="Em" id="sudoedit_checkdir">sudoedit_checkdir</i></a>
      option in <a class="Xr" href="sudoers.5.html">sudoers(5)</a> for more
      information.</dd>
  <dt id="editing~2"><a class="permalink" href="#editing~2"><code class="Li">editing
    symbolic links is not permitted</code></a></dt>
  <dd>By default, <code class="Nm">sudoedit</code> does not follow symbolic
      links when opening files. See the
      <a class="permalink" href="#sudoedit_follow"><i class="Em" id="sudoedit_follow">sudoedit_follow</i></a>
      option in <a class="Xr" href="sudoers.5.html">sudoers(5)</a> for more
      information.</dd>
  <dt id="effective"><a class="permalink" href="#effective"><code class="Li">effective
    uid is not 0, is sudo installed setuid root?</code></a></dt>
  <dd><code class="Nm">sudo</code> was not run with root privileges. The
      <code class="Nm">sudo</code> binary must be owned by the root user and
      have the set-user-ID bit set. Also, it must not be located on a file
      system mounted with the &#x2018;nosuid&#x2019; option or on an NFS file
      system that maps uid 0 to an unprivileged uid.</dd>
  <dt id="effective~2"><a class="permalink" href="#effective~2"><code class="Li">effective
    uid is not 0, is sudo on a file system with the 'nosuid' option set or an
    NFS file system without root privileges?</code></a></dt>
  <dd><code class="Nm">sudo</code> was not run with root privileges. The
      <code class="Nm">sudo</code> binary has the proper owner and permissions
      but it still did not run with root privileges. The most common reason for
      this is that the file system the <code class="Nm">sudo</code> binary is
      located on is mounted with the &#x2018;nosuid&#x2019; option or it is an
      NFS file system that maps uid 0 to an unprivileged uid.</dd>
  <dt id="fatal"><a class="permalink" href="#fatal"><code class="Li">fatal
    error, unable to load plugins</code></a></dt>
  <dd>An error occurred while loading or initializing the plugins specified in
      <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a>.</dd>
  <dt id="invalid"><a class="permalink" href="#invalid"><code class="Li">invalid
    environment variable name</code></a></dt>
  <dd>One or more environment variable names specified via the
      <code class="Fl">-E</code> option contained an equal sign
      (&#x2018;<code class="Li">=</code>&#x2019;). The arguments to the
      <code class="Fl">-E</code> option should be environment variable names
      without an associated value.</dd>
  <dt id="no"><a class="permalink" href="#no"><code class="Li">no password was
    provided</code></a></dt>
  <dd>When <code class="Nm">sudo</code> tried to read the password, it did not
      receive any characters. This may happen if no terminal is available (or
      the <code class="Fl">-S</code> option is specified) and the standard input
      has been redirected from <span class="Pa">/dev/null</span>.</dd>
  <dt id="a"><a class="permalink" href="#a"><code class="Li">a terminal is
    required to read the password</code></a></dt>
  <dd><code class="Nm">sudo</code> needs to read the password but there is no
      mechanism available for it to do so. A terminal is not present to read the
      password from, <code class="Nm">sudo</code> has not been configured to
      read from the standard input, the <code class="Fl">-S</code> option was
      not used, and no askpass helper has been specified either via the
      <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a> file or the
      <code class="Ev">SUDO_ASKPASS</code> environment variable.</dd>
  <dt id="no~2"><a class="permalink" href="#no~2"><code class="Li">no writable
    temporary directory found</code></a></dt>
  <dd><code class="Nm">sudoedit</code> was unable to find a usable temporary
      directory in which to store its intermediate files.</dd>
  <dt id="The"><a class="permalink" href="#The"><code class="Li">The</code></a>
    &#x201C;no new privileges&#x201D; flag is set, which prevents sudo from
    running as root.</dt>
  <dd><code class="Nm">sudo</code> was run by a process that has the Linux
      &#x201C;no new privileges&#x201D; flag is set. This causes the set-user-ID
      bit to be ignored when running an executable, which will prevent
      <code class="Nm">sudo</code> from functioning. The most likely cause for
      this is running <code class="Nm">sudo</code> within a container that sets
      this flag. Check the documentation to see if it is possible to configure
      the container such that the flag is not set.</dd>
  <dt id="sudo"><a class="permalink" href="#sudo"><code class="Li">sudo must be
    owned by uid 0 and have the setuid bit set</code></a></dt>
  <dd><code class="Nm">sudo</code> was not run with root privileges. The
      <code class="Nm">sudo</code> binary does not have the correct owner or
      permissions. It must be owned by the root user and have the set-user-ID
      bit set.</dd>
  <dt id="sudoedit"><a class="permalink" href="#sudoedit"><code class="Li">sudoedit
    is not supported on this platform</code></a></dt>
  <dd>It is only possible to run <code class="Nm">sudoedit</code> on systems
      that support setting the effective user-ID.</dd>
  <dt id="timed"><a class="permalink" href="#timed"><code class="Li">timed out
    reading password</code></a></dt>
  <dd>The user did not enter a password before the password timeout (5 minutes
      by default) expired.</dd>
  <dt id="you"><a class="permalink" href="#you"><code class="Li">you do not
    exist in the passwd database</code></a></dt>
  <dd>Your user-ID does not appear in the system passwd database.</dd>
  <dt id="you~2"><a class="permalink" href="#you~2"><code class="Li">you may not
    specify environment variables in edit mode</code></a></dt>
  <dd>It is only possible to specify environment variables when running a
      <var class="Ar">command</var>. When editing a file, the editor is run with
      the user's environment unmodified.</dd>
</dl>
</section>
<section class="Sh">
<h1 class="Sh" id="SEE_ALSO"><a class="permalink" href="#SEE_ALSO">SEE
  ALSO</a></h1>
<p class="Pp"><a class="Xr" href="su.1.html">su(1)</a>,
    <a class="Xr" href="stat.2.html">stat(2)</a>,
    <a class="Xr" href="login_cap.3.html">login_cap(3)</a>,
    <a class="Xr" href="passwd.5.html">passwd(5)</a>,
    <a class="Xr" href="sudo.conf.5.html">sudo.conf(5)</a>,
    <a class="Xr" href="sudo_plugin.5.html">sudo_plugin(5)</a>,
    <a class="Xr" href="sudoers.5.html">sudoers(5)</a>,
    <a class="Xr" href="sudoers_timestamp.5.html">sudoers_timestamp(5)</a>,
    <a class="Xr" href="sudoreplay.8.html">sudoreplay(8)</a>,
    <a class="Xr" href="visudo.8.html">visudo(8)</a></p>
</section>
<section class="Sh">
<h1 class="Sh" id="HISTORY"><a class="permalink" href="#HISTORY">HISTORY</a></h1>
<p class="Pp">See the HISTORY.md file in the <code class="Nm">sudo</code>
    distribution (https://www.sudo.ws/about/history/) for a brief history of
    sudo.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="AUTHORS"><a class="permalink" href="#AUTHORS">AUTHORS</a></h1>
<p class="Pp">Many people have worked on <code class="Nm">sudo</code> over the
    years; this version consists of code written primarily by:</p>
<div class="Bd Pp Bd-indent"><span class="An">Todd C. Miller</span></div>
<p class="Pp">See the CONTRIBUTORS.md file in the <code class="Nm">sudo</code>
    distribution (https://www.sudo.ws/about/contributors/) for an exhaustive
    list of people who have contributed to <code class="Nm">sudo</code>.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="CAVEATS"><a class="permalink" href="#CAVEATS">CAVEATS</a></h1>
<p class="Pp">There is no easy way to prevent a user from gaining a root shell
    if that user is allowed to run arbitrary <var class="Ar">commands</var> via
    <code class="Nm">sudo</code>. Also, many programs (such as editors) allow
    the user to run <var class="Ar">command</var>s via shell escapes, thus
    avoiding <code class="Nm">sudo</code>'s checks. However, on most systems it
    is possible to prevent shell escapes with the
    <a class="Xr" href="sudoers.5.html">sudoers(5)</a> plugin's
    <a class="permalink" href="#noexec"><i class="Em" id="noexec">noexec</i></a>
    functionality.</p>
<p class="Pp">It is not meaningful to run the
    &#x2018;<code class="Li">cd</code>&#x2019; <var class="Ar">command</var>
    directly via sudo, e.g.,</p>
<div class="Bd Pp Bd-indent Li">
<pre>$ sudo cd /usr/local/protected</pre>
</div>
<p class="Pp">since when the <var class="Ar">command</var> exits the parent
    process (your shell) will still be the same. The <code class="Fl">-D</code>
    option can be used to run a <var class="Ar">command</var> in a specific
    <var class="Ar">directory</var>.</p>
<p class="Pp">Running shell scripts via <code class="Nm">sudo</code> can expose
    the same kernel bugs that make set-user-ID shell scripts unsafe on some
    operating systems (if your OS has a /dev/fd/ directory, set-user-ID shell
    scripts are generally safe).</p>
</section>
<section class="Sh">
<h1 class="Sh" id="BUGS"><a class="permalink" href="#BUGS">BUGS</a></h1>
<p class="Pp">If you believe you have found a bug in
    <code class="Nm">sudo</code>, you can either file a bug report in the sudo
    bug database, https://bugzilla.sudo.ws/, or open an issue at
    https://github.com/sudo-project/sudo/issues. If you would prefer to use
    email, messages may be sent to the sudo-workers mailing list,
    https://www.sudo.ws/mailman/listinfo/sudo-workers (public) or
    &lt;sudo@sudo.ws&gt; (private).</p>
<p class="Pp">Please not report security vulnerabilities through public GitHub
    issues, Bugzilla or mailing lists. Instead, report them via email to
    &lt;Todd.Miller@sudo.ws&gt;. You may encrypt your message with PGP if you
    would like, using the key found at https://www.sudo.ws/dist/PGPKEYS.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="SUPPORT"><a class="permalink" href="#SUPPORT">SUPPORT</a></h1>
<p class="Pp">Limited free support is available via the sudo-users mailing list,
    see https://www.sudo.ws/mailman/listinfo/sudo-users to subscribe or search
    the archives.</p>
</section>
<section class="Sh">
<h1 class="Sh" id="DISCLAIMER"><a class="permalink" href="#DISCLAIMER">DISCLAIMER</a></h1>
<p class="Pp"><code class="Nm">sudo</code> is provided &#x201C;AS IS&#x201D; and
    any express or implied warranties, including, but not limited to, the
    implied warranties of merchantability and fitness for a particular purpose
    are disclaimed. See the LICENSE.md file distributed with
    <code class="Nm">sudo</code> or https://www.sudo.ws/about/license/ for
    complete details.</p>
</section>
</div>
<table class="foot">
  <tr>
    <td class="foot-date">August 9, 2023</td>
    <td class="foot-os">Sudo 1.9.16</td>
  </tr>
</table>
</body>
</html>
